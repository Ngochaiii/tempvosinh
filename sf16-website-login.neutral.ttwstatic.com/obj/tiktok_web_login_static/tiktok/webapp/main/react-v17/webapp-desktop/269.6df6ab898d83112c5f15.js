"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[269],{2354:(t,n,e)=>{e.d(n,{Dq:()=>l,Ze:()=>o,ph:()=>c,zB:()=>r});var a=e(35762),i=e(17384),s=function(t,n,e,a){return new(e||(e=Promise))(function(i,s){function o(t){try{c(a.next(t))}catch(t){s(t)}}function r(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(o,r)}c((a=a.apply(t,n||[])).next())})};const o=t=>s(void 0,void 0,void 0,function*(){return a.h.get("/tiktok/cla/subtitle_translation/get/v1/",{query:t,baseUrlType:i.Z4.FixedWww})}),r=t=>s(void 0,void 0,void 0,function*(){return a.h.get("/aweme/v1/translation/description/",{query:t,baseUrlType:i.Z4.FixedWww})}),c=t=>s(void 0,void 0,void 0,function*(){return a.h.get("/aweme/v1/translation/title/",{query:t,baseUrlType:i.Z4.FixedWww})}),l=t=>{const{languageSettings:n,secUid:e}=t;return a.h.post("/api/user/settings/update/",{query:{languageSettings:JSON.stringify(n),secUid:e},tt_csrf_token:a.h.csrfToken,baseUrlType:i.Z4.FixedWww,headers:{[i.nk]:a.h.csrfToken}})}},3312:(t,n,e)=>{e.d(n,{PU:()=>s,ku:()=>c,u8:()=>g});var a=e(64388),i=e(1183),s=function(t){return t.Notice="notice",t.Error="error",t.CTA="cta",t}({});const o=(0,i.p)("toastAtom@tiktok/webapp-atoms",{});let r=0;const{useAtomService:c,useServiceDispatchers:l,useServiceState:u,getStaticApi:g}=(0,a.i)(o,(t,n)=>({addToast(t){const e=`${Number(new Date).toString(36)}_${r++}`;n(o,n=>Object.assign(Object.assign({},n),{[e]:Object.assign({id:e},t)}))},removeToast(...e){const a=t(o);e.forEach(t=>{t in a&&delete a[t]}),n(o,a)}}))},6473:(t,n,e)=>{e.d(n,{JE:()=>s,K:()=>r});var a=e(64388);const i=(0,e(1183).p)("captionInfoAtom@tiktok/webapp-atoms",{isCaptionModalOn:!1,currentCaption:"",captionModalEnterMethod:"click_cc_indicator"}),{useAtomService:s,useServiceState:o,useServiceDispatchers:r,getStaticApi:c}=(0,a.i)(i,(t,n)=>({setIsCaptionModalOn(t){n(i,n=>Object.assign(Object.assign({},n),{isCaptionModalOn:t}))},setCurrentCaption(t){n(i,n=>Object.assign(Object.assign({},n),{currentCaption:t}))},setCaptionModalEnterMethod(t){n(i,n=>Object.assign(Object.assign({},n),{captionModalEnterMethod:t}))},setCaptionModalRoot(t){n(i,n=>Object.assign(Object.assign({},n),{captionModalRoot:t}))}}))},10907:(t,n,e)=>{e.d(n,{M:()=>S,Oh:()=>_,RA:()=>y,Vk:()=>h,ik:()=>T,sX:()=>C,xJ:()=>L,xL:()=>f,xr:()=>p});var a=e(64388),i=e(61198),s=e(1183),o=e(2354),r=e(87215),c=e(69857),l=e(37783),u=e(11706),g=function(t,n,e,a){return new(e||(e=Promise))(function(i,s){function o(t){try{c(a.next(t))}catch(t){s(t)}}function r(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(o,r)}c((a=a.apply(t,n||[])).next())})};const d=(0,s.p)("translationAtom@tiktok/webapp-atoms",{}),{useAtomService:v,useServiceState:O,useServiceDispatchers:p,getStaticApi:b}=(0,a.i)(d,(t,n)=>({getSubtitleTranslation(t){return g(this,void 0,void 0,function*(){const{target_language:e,item_id:a}=t;try{const i=yield(0,o.Ze)(t);i.status_code===r.s.Ok&&n(d,t=>Object.assign(Object.assign({},t),{[a]:Object.assign(Object.assign({},t[a]),{subtitle:{stringContent:i.webvtt_subtitle,language:e,id:"999"}})}))}catch(t){}})},getDescriptionTranslation(t){return g(this,void 0,void 0,function*(){const{item_id:e}=t;if(e)try{const a=yield(0,o.zB)(t);a.status_code===r.s.Ok&&n(d,t=>Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{description:a.translated_content})}))}catch(t){}})},getPhotoTitleTranslation(t){return g(this,void 0,void 0,function*(){const{item_id:e}=t;if(e)try{const a=yield(0,o.ph)(t);a.status_code===r.s.Ok&&n(d,t=>Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{title:a.translated_content})}))}catch(t){}})},setShowTranslation(t,e){n(d,n=>Object.assign(Object.assign({},n),{[t]:Object.assign(Object.assign({},n[t]),{showTranslation:e})}))}})),L=t=>O(n=>{var e;return null==(e=n[t])?void 0:e.subtitle}),f=t=>{const n=(0,l.F3)(n=>n[t]),{video:e}=(0,c.L$)(n),{claInfo:a}=(0,c.L$)(e),{originalLanguageInfo:s}=(0,c.L$)(a),{languageCode:o,canTranslateRealTimeNoCheck:r}=(0,c.L$)(s),{selectedTranslationLanguage:g,isReady:d}=(0,u.RD)(t=>({selectedTranslationLanguage:t.selectedTranslationLanguage,isReady:t.isReady}),i.bN);return Boolean(o!==g&&r&&d)},h=t=>{var n;const e=(0,l.F3)(n=>n[t]),{video:a}=(0,c.L$)(e),{claInfo:i}=(0,c.L$)(a),s=null==i||null==(n=i.originalLanguageInfo)?void 0:n.languageCode,{isMasterTranslationOn:o,translationDisableLanguages:r}=(0,u.RD)(),g=f(t);return Boolean(g&&o&&s&&!r.includes(s))},T=t=>O(n=>{var e;return null==(e=n[t])?void 0:e.description}),S=t=>{const n=(0,l.F3)(n=>n[t]),{textLanguage:e,textTranslatable:a}=(0,c.L$)(n),{selectedTranslationLanguage:s,isReady:o}=(0,u.RD)(t=>({selectedTranslationLanguage:t.selectedTranslationLanguage,isReady:t.isReady}),i.bN);return Boolean(e!==s&&a&&o)},_=t=>{const n=(0,l.F3)(n=>n[t]),{textLanguage:e}=(0,c.L$)(n),{isMasterTranslationOn:a,translationDisableLanguages:i}=(0,u.RD)(),s=S(t);return Boolean(s&&a&&e&&!i.includes(e))},y=t=>O(n=>{var e;return null==(e=n[t])?void 0:e.title}),C=t=>O(n=>{var e;return!!(null==(e=n[t])?void 0:e.showTranslation)})},11706:(t,n,e)=>{e.d(n,{U1:()=>S,$F:()=>h,RD:()=>T});var a=e(64388),i=e(1183),s=e(46833),o=e(89768),r=e(20434);e(69857);const c="enableMasterTranslation",l="selectedTranslationLanguage",u="translationDisableLanguages",g="enableCaption";var d=e(19166),v=e(2232),O=function(t,n,e,a){return new(e||(e=Promise))(function(i,s){function o(t){try{c(a.next(t))}catch(t){s(t)}}function r(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(o,r)}c((a=a.apply(t,n||[])).next())})};const p=t=>O(void 0,void 0,void 0,function*(){var n,e;return(null!==(n=null==(e=(yield(0,d.h)()).claConfig)?void 0:e.isoToSubtitleLanguageCode)&&void 0!==n?n:{})[t]||t});e(2354),e(37783);var b=e(3312),L=function(t,n,e,a){return new(e||(e=Promise))(function(i,s){function o(t){try{c(a.next(t))}catch(t){s(t)}}function r(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(o,r)}c((a=a.apply(t,n||[])).next())})};const f=(0,i.p)("languageAtom@tiktok/webapp-atoms",{isMasterTranslationOn:!1,isForeignCaptionOn:!1,isNativeCaptionOn:!1,isCaptionOn:!1,selectedTranslationLanguage:"",translationDisableLanguages:[],enableMasterTranslation:s.SR.CLA_TOGGLE_UNKNOWN,enableForeignCaption:s.SR.CLA_TOGGLE_UNKNOWN,enableNativeCaption:s.SR.CLA_TOGGLE_UNKNOWN,isReady:!1}),{useAtomService:h,useServiceState:T,useServiceDispatchers:S,getStaticApi:_}=(0,a.i)(f,(t,n)=>({setLanguageSetting(t){return L(this,void 0,void 0,function*(){const{user:t}=(0,o.x)();let e;e=yield function(){var t;return O(this,void 0,void 0,function*(){const n=null!==(t=(0,v.d)("enable_post_translation"))&&void 0!==t?t:"v0",e="v1"===n||"v3"===n&&"1"===(0,r._S)(g,"0"),a=s.SR.CLA_TOGGLE_MANUAL_ON.toString(),i="1"===(0,r._S)(g,"0"),p=(0,r._S)(c,e?a:"")===a;let b=[],L=(()=>{const{language:t}=(0,o.x)();let n=t;return"zh-Hant-TW"===t?n="zh-Hant":"zh-Hans"!==t&&(n=t.split("-")[0]),n})();try{b=JSON.parse((0,r._S)(u,"[]")),L=yield(f=JSON.parse((0,r._S)(l,"")),O(void 0,void 0,void 0,function*(){var t,n;return(null!==(t=null==(n=(yield(0,d.h)()).claConfig)?void 0:n.subtitleToIsoLanguageCode)&&void 0!==t?t:{})[f]||f}))}catch(t){}var f;return{isCaptionOn:i,isMasterTranslationOn:p,selectedTranslationLanguage:L,translationDisableLanguages:b}})}(),n(f,t=>Object.assign(Object.assign(Object.assign({},t),e),{isReady:!0}))})},setSelectedTranslationLanguage(e){return L(this,void 0,void 0,function*(){const a=t(f),i=yield p(e);n(f,t=>Object.assign(Object.assign({},t),{selectedTranslationLanguage:e})),yield this.updateLanguageSettings(l,i,a)})},setTranslationDisableLanguages(e){return L(this,void 0,void 0,function*(){const a=t(f);n(f,t=>Object.assign(Object.assign({},t),{translationDisableLanguages:e})),yield this.updateLanguageSettings(u,e,a)})},setIsMasterTranslationOn(e){return L(this,void 0,void 0,function*(){const a=t(f),i=e?s.SR.CLA_TOGGLE_MANUAL_ON:s.SR.CLA_TOGGLE_MANUAL_OFF;n(f,t=>Object.assign(Object.assign({},t),{isMasterTranslationOn:e,enableMasterTranslation:i})),yield this.updateLanguageSettings(c,i,a)})},setIsCaptionOn(e,a,i=!0){return L(this,void 0,void 0,function*(){return i&&(0,r.AP)(g,e?"1":"0"),void(e!==t(f).isCaptionOn&&n(f,t=>Object.assign(Object.assign({},t),{isCaptionOn:e})))})},updateLanguageSettings(n,e,a){return L(this,void 0,void 0,function*(){const{user:a}=(0,o.x)(),{enableForeignCaption:i,enableMasterTranslation:s,enableNativeCaption:c,selectedTranslationLanguage:l,translationDisableLanguages:u}=t(f);yield p(l),(0,b.u8)(),(0,r.AP)(n,JSON.stringify(e))})}}))},40485:(t,n,e)=>{e.d(n,{l:()=>o});var a=e(69857),i=e(37783),s=e(11706);const o=t=>{var n;const e=(0,i.F3)(n=>n[t]),{video:o}=(0,a.L$)(e),{claInfo:r}=(0,a.L$)(o),{selectedTranslationLanguage:c,translationDisableLanguages:l,isForeignCaptionOn:u,isNativeCaptionOn:g,isCaptionOn:d}=(null==r||null==(n=r.originalLanguageInfo)||n.languageCode,(0,s.RD)());return d}},42123:(t,n,e)=>{e.d(n,{N:()=>a});const a="caption"}}]);