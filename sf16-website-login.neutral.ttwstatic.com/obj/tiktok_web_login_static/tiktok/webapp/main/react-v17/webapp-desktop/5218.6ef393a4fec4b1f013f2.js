"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5218],{2837:(e,t,s)=>{s.d(t,{IN:()=>v,ZY:()=>C,jG:()=>S});var i,a=s(1183),o=s(78695),n=s(64388),r=s(35762),c=s(46833),u=s(40746);!function(e){class t{constructor(e){this.Open=!1,this.Env="",e&&(void 0!==e.Open&&(this.Open=e.Open),void 0!==e.Env&&(this.Env=e.Env))}}e.TrafficEnv=t,e.Base=class{constructor(e){this.LogID="",this.Caller="",this.Addr="",this.Client="",e&&(void 0!==e.LogID&&(this.LogID=e.LogID),void 0!==e.Caller&&(this.Caller=e.Caller),void 0!==e.Addr&&(this.Addr=e.Addr),void 0!==e.Client&&(this.Client=e.Client),void 0!==e.TrafficEnv&&(this.TrafficEnv=new t(e.TrafficEnv)),void 0!==e.Extra&&(this.Extra=e.Extra))}},e.BaseResp=class{constructor(e){this.StatusMessage="",this.StatusCode=0,e&&(void 0!==e.StatusMessage&&(this.StatusMessage=e.StatusMessage),void 0!==e.StatusCode&&(this.StatusCode=e.StatusCode),void 0!==e.Extra&&(this.Extra=e.Extra))}}}(i||(i={})),i.TrafficEnv,i.Base,i.BaseResp,function(e){var t,s,a,o,n,r,c;(t=e.ContentEnum||(e.ContentEnum={}))[t.Video=0]="Video",t[t.User=1]="User",t[t.Challenge=3]="Challenge",t[t.Music=4]="Music",(s=e.ContentType||(e.ContentType={}))[s.UniqId=1]="UniqId",s[s.ItemId=2]="ItemId",s[s.SongName=3]="SongName",s[s.ChallengeName=4]="ChallengeName",s[s.QuestionId=5]="QuestionId",s[s.Keyword=6]="Keyword",s[s.LiveEventId=7]="LiveEventId",(a=e.LiveEventStatus||(e.LiveEventStatus={}))[a.Created=1]="Created",a[a.Reviewing=2]="Reviewing",a[a.ReviewFailed=3]="ReviewFailed",a[a.Upcoming=4]="Upcoming",a[a.Started=5]="Started",a[a.Deleted=6]="Deleted",a[a.Finished=7]="Finished",(o=e.TrafficType||(e.TrafficType={}))[o.USER=0]="USER",o[o.GOOGLE_BOT=1]="GOOGLE_BOT",o[o.BING_BOT=2]="BING_BOT",o[o.NAVER_BOT=3]="NAVER_BOT",o[o.YAHOOJP_BOT=4]="YAHOOJP_BOT",(c=e.Module||(e.Module={}))[c.Sidebar=0]="Sidebar",c[c.ItemDescription=1]="ItemDescription",c[c.UserPageItem=2]="UserPageItem",c[c.KEPDisplayUrl=3]="KEPDisplayUrl",c[c.Breadcrumb=4]="Breadcrumb",c[c.Footer=5]="Footer",c[c.BottomNavigation=6]="BottomNavigation",c[c.VideoInfoCard=7]="VideoInfoCard",c[c.KAPVideo=8]="KAPVideo",c[c.PRODUCT_LIST=9]="PRODUCT_LIST",c[c.PRODUCT_RELATED_WORD=10]="PRODUCT_RELATED_WORD",c[c.KAP_RELATED_WORD=11]="KAP_RELATED_WORD",c[c.GENERAL_EXPOSURE=12]="GENERAL_EXPOSURE",(n=e.SearchEngine||(e.SearchEngine={}))[n.Google=1]="Google",n[n.Bing=2]="Bing",(r=e.IndexAction||(e.IndexAction={}))[r.Update=1]="Update",r[r.Delete=2]="Delete",e.StatusCodeEmptyParams=1001,e.StatusCodeWordNotExist=1002,e.StatusCodeExceedMaxBatchSize=1003,e.StatusCodeInvalidParams=1004,e.StatusCodeInternalError=2001,e.GetChallengeSplitByIdRequest=class{constructor(e){e&&(this.ChallengeIds=e.ChallengeIds,this.VisitorLanguage=e.VisitorLanguage,this.Region=e.Region,this.appId=e.appId,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetChallengeSplitByIdResponse=class{constructor(e){e&&(this.challengeSplitMap=e.challengeSplitMap,void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}},e.GetPredictedLanguageResponse=class{constructor(e){e&&(this.predictedLanguage=e.predictedLanguage,void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}},e.GetPredictedLanguageRequest=class{constructor(e){e&&(this.Content=e.Content,this.ContentType=e.ContentType,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}};class u{constructor(e){e&&(this.Uri=e.Uri,this.UrlList=e.UrlList)}}e.UrlStruct=u;class d{constructor(e){e&&(this.Id=e.Id,this.UniqueId=e.UniqueId,this.Nickname=e.Nickname,this.AvatarThumb=new u(e.AvatarThumb),this.AvatarMedium=new u(e.AvatarMedium),this.AvatarLarger=new u(e.AvatarLarger),this.CreateTime=e.CreateTime,void 0!==e.SecUid&&(this.SecUid=e.SecUid),this.PrivateAccount=e.PrivateAccount,this.Ftc=e.Ftc)}}e.UserStruct=d;class m{constructor(e){e&&(this.Id=e.Id,this.Text=e.Text,this.CreateTime=e.CreateTime,this.DiggCount=e.DiggCount,void 0!==e.User&&(this.User=new d(e.User)))}}e.CommentStruct=m;class l{constructor(e){e&&(this.ItemId=e.ItemId,this.Comments=Array.isArray(e.Comments)?e.Comments.map(e=>new m(e)):e.Comments)}}e.ItemCommentStruct=l,e.MultiGetItemCommentRequest=class{constructor(e){e&&(this.ItemIds=e.ItemIds,void 0!==e.ClientABVersionNames&&(this.ClientABVersionNames=e.ClientABVersionNames),void 0!==e.Biz&&(this.Biz=e.Biz),void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.MultiGetItemCommentResponse=class{constructor(e){e&&(void 0!==e.ItemComments&&(this.ItemComments=Array.isArray(e.ItemComments)?e.ItemComments.map(e=>new l(e)):e.ItemComments),void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}};class p{constructor(e){e&&(this.ID=e.ID,this.OwnerUserID=e.OwnerUserID,this.StartTime=e.StartTime,this.Duration=e.Duration,this.Title=e.Title,this.Description=e.Description,this.Status=e.Status)}}e.LiveEvent=p,e.GetUpcomingLiveEventByUserRequest=class{constructor(e){e&&(this.UserID=e.UserID,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetUpcomingLiveEventByUserResponse=class{constructor(e){e&&(void 0!==e.Event&&(this.Event=new p(e.Event)),void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}},e.SubmitClientUrlImpressionRequest=class{constructor(e){e&&(this.Timestamp=e.Timestamp,this.VisitPageUrl=e.VisitPageUrl,this.Urls=e.Urls,this.Module=e.Module,this.TrafficType=e.TrafficType,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.SubmitClientUrlImpressionResponse=class{constructor(e){e&&void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp))}},e.GetSitemapListRequest=class{constructor(e){e&&(this.TrafficType=e.TrafficType,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetSitemapListResponse=class{constructor(e){e&&(void 0!==e.IndexLists&&(this.IndexLists=e.IndexLists),void 0!==e.DeIndexLists&&(this.DeIndexLists=e.DeIndexLists),void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}};class h{constructor(e){e&&(this.Engine=e.Engine,this.Action=e.Action,this.Url=e.Url)}}e.IndexSubmission=h,e.GetIndexSubmissionStatusRequest=class{constructor(e){e&&(void 0!==e.Submission&&(this.Submission=Array.isArray(e.Submission)?e.Submission.map(e=>new h(e)):e.Submission),void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}};class I{constructor(e){e&&(this.Success=e.Success)}}e.SubmissionStatus=I,e.GetIndexSubmissionStatusResponse=class{constructor(e){e&&(this.Status=Array.isArray(e.Status)?e.Status.map(e=>new I(e)):e.Status,void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}};class B{constructor(e){e&&(this.Title=e.Title,this.Desc=e.Desc,this.Keywords=e.Keywords,void 0!==e.Article&&(this.Article=e.Article))}}e.ItemCustomTDKStruct=B,e.GetCustomTDKByItemIDRequest=class{constructor(e){e&&(this.ItemID=e.ItemID,void 0!==e.BizConfigID&&(this.BizConfigID=e.BizConfigID),void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetCustomTDKByItemIDResponse=class{constructor(e){e&&(void 0!==e.ItemCustomTDK&&(this.ItemCustomTDK=new B(e.ItemCustomTDK)),void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}},e.GetCustomTDKBatchItemIDsRequest=class{constructor(e){e&&(this.ItemIDList=e.ItemIDList,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetCustomTDKBatchItemIDsResponse=class{constructor(e){e&&(this.ItemMapCustomTDK=e.ItemMapCustomTDK?Object.fromEntries(Object.entries(e.ItemMapCustomTDK).map(([e,t])=>[e,new B(t)])):e.ItemMapCustomTDK,void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}};class T{constructor(e){e&&(void 0!==e.Title&&(this.Title=e.Title),void 0!==e.Description&&(this.Description=e.Description),void 0!==e.Keywords&&(this.Keywords=e.Keywords),void 0!==e.Article&&(this.Article=e.Article))}}e.CustomTDK=T,e.GetCustomTDKRequest=class{constructor(e){e&&(this.PageID=e.PageID,this.PageType=e.PageType,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetCustomTDKResponse=class{constructor(e){e&&(void 0!==e.CustomTDK&&(this.CustomTDK=new T(e.CustomTDK)),void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}},e.GetTranslatedItemInfoRequest=class{constructor(e){e&&(this.TrafficType=e.TrafficType,this.ItemId=e.ItemId,this.TargetLanguage=e.TargetLanguage,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}},e.GetTranslatedItemInfoResponse=class{constructor(e){e&&(void 0!==e.Description&&(this.Description=e.Description),void 0!==e.TextStickerList&&(this.TextStickerList=e.TextStickerList),void 0!==e.SubtitleUrl&&(this.SubtitleUrl=e.SubtitleUrl),void 0!==e.SubtitleUrlExpire&&(this.SubtitleUrlExpire=e.SubtitleUrlExpire),void 0!==e.SubtitleText&&(this.SubtitleText=e.SubtitleText),void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}},e.GetTranslatedCommentRequest=class{constructor(e){e&&(this.TrafficType=e.TrafficType,this.CommentTextList=Array.isArray(e.CommentTextList)?e.CommentTextList.map(e=>new R(e)):e.CommentTextList,this.TargetLanguage=e.TargetLanguage,void 0!==e.Base&&(this.Base=new i.Base(e.Base)))}};class R{constructor(e){e&&(this.Text=e.Text,this.Language=e.Language)}}e.CommentTextInfo=R,e.GetTranslatedCommentResponse=class{constructor(e){e&&(this.CommentTextList=e.CommentTextList,void 0!==e.BaseResp&&(this.BaseResp=new i.BaseResp(e.BaseResp)))}}}(m||(m={})),m.ContentEnum,m.ContentType,m.LiveEventStatus;const d=m.TrafficType;m.Module,m.SearchEngine,m.IndexAction,m.StatusCodeEmptyParams,m.StatusCodeWordNotExist,m.StatusCodeExceedMaxBatchSize,m.StatusCodeInvalidParams,m.StatusCodeInternalError,m.GetChallengeSplitByIdRequest,m.GetChallengeSplitByIdResponse,m.GetPredictedLanguageResponse,m.GetPredictedLanguageRequest,m.UrlStruct,m.UserStruct,m.CommentStruct,m.ItemCommentStruct,m.MultiGetItemCommentRequest,m.MultiGetItemCommentResponse,m.LiveEvent,m.GetUpcomingLiveEventByUserRequest,m.GetUpcomingLiveEventByUserResponse,m.SubmitClientUrlImpressionRequest,m.SubmitClientUrlImpressionResponse,m.GetSitemapListRequest,m.GetSitemapListResponse,m.IndexSubmission,m.GetIndexSubmissionStatusRequest,m.SubmissionStatus,m.GetIndexSubmissionStatusResponse,m.ItemCustomTDKStruct,m.GetCustomTDKByItemIDRequest,m.GetCustomTDKByItemIDResponse,m.GetCustomTDKBatchItemIDsRequest,m.GetCustomTDKBatchItemIDsResponse,m.CustomTDK,m.GetCustomTDKRequest,m.GetCustomTDKResponse,m.GetTranslatedItemInfoRequest,m.GetTranslatedItemInfoResponse,m.GetTranslatedCommentRequest,m.CommentTextInfo,m.GetTranslatedCommentResponse,m.AwemeSeoDiscoveryService;var m,l=s(57432),p=s.n(l),h=(s(22113),s(95804)),I=function(e,t,s,i){return new(s||(s=Promise))(function(a,o){function n(e){try{c(i.next(e))}catch(e){o(e)}}function r(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,r)}c((i=i.apply(e,t||[])).next())})};const B=(0,u.M)({csr:(e,t)=>I(void 0,void 0,void 0,function*(){let s={statusCode:-1,channelsByItemId:{}};try{const i={trafficType:d.USER,itemIds:e,clientABVersions:t};s=yield r.h.get("/api/seo/keyword/item_tags/",{query:i}),s.keywordsByItemId&&Object.keys(s.keywordsByItemId).forEach(e=>{var t,i;const a=null==(t=s.keywordsByItemId)?void 0:t[e];null==a||null==(i=a.keywordTags)||i.forEach(e=>{switch(e.seoPageType){case c.fJ.SEO_PAGE_TYPE_DISCOVER:e.pageType=c.dl.KEYWORD_PAGE_TYPE_DISCOVER;break;case c.fJ.SEO_PAGE_TYPE_CHANNEL:e.pageType=c.dl.KEYWORD_PAGE_TYPE_CHANNEL;break;case c.fJ.SEO_PAGE_TYPE_FIND:e.pageType=c.dl.KEYWORD_PAGE_TYPE_FIND;break;default:e.pageType=c.dl.KEYWORD_PAGE_TYPE_DISCOVER}})})}catch(e){console.log("tag item api fetch error",e)}return s})}),T=(0,u.M)({csr:p()}),R=(0,o._)((0,a.p)("seoItemTagsAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"seo.linker.item_tag"}),{useAtomService:C,useServiceDispatchers:v,useServiceState:S,getStaticApi:g}=(0,n.i)(R,(e,t)=>({setItemTagList(s,i={},a){var o;return I(this,void 0,void 0,function*(){const n=e(R),{tagKeywordPathList:r}=n;t(R,{loading:!0,tagKeywordPathList:r});const c=yield B(s,a),{keywordsByItemId:u}=c;if(!u)return;const d={},m=[];for(const[e,t]of Object.entries(u))d[e]=(0,h.Kk)(null!==(o=t.keywordTags)&&void 0!==o?o:[]),d[e].length>0&&m.push(...d[e].map(e=>e.linkPath));return m.length>0&&i.pathname&&T(m,i.pathname),t(R,{tagKeywordPathList:Object.assign(Object.assign({},d),r),loading:!1})})}}))}}]);